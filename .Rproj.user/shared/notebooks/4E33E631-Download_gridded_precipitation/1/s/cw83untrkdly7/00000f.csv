"0","#| output: false"
"0","chirps<- list.files(""../data_reanalysis/CHIRPS 2.0"", pattern="".tif"", full.names = TRUE)"
"0","month <- numeric(length(chirps))"
"0","year <- numeric(length(chirps))"
"0","for (i in 1:length(chirps)) {"
"0","    file_parts <- unlist(strsplit(basename(chirps[i]), ""\\.""))"
"0","    month[i] <- as.numeric(file_parts[4])"
"0","    year[i] <- as.numeric(file_parts[3])"
"0","  }"
"0","chirps <- data.frame(chirps, month, year)"
"0","if (file.exists(""../data_reanalysis/CHIRPS 2.0/climatology"")==FALSE){"
"0","  dir.create(""../data_reanalysis/CHIRPS 2.0/climatology"", showWarnings = FALSE)"
"0","  for (m in unique(chirps$month)){"
"0","    print(paste0(""Processing "", m))"
"0","    ras <- raster::stack(chirps[chirps$month == m, ]$chirps)"
"0","    print(paste0(""Stacked "", m))"
"0","    ras <- raster::calc(ras, mean)"
"0","    print(paste0(""Calculated "", m))"
"0","    output_file <- paste0(""../data_reanalysis/CHIRPS 2.0/climatology/CHIRPS_2.0_"", m, "".tif"")"
"0","    terra::writeRaster(ras, filename = output_file, format = ""GTiff"", overwrite = TRUE)"
"0","  }"
"0","}else{"
"0","  print(""climatology already proccessed"")"
"0","}"
"1","[1]"
"1"," ""climatology already proccessed"""
"1","
"

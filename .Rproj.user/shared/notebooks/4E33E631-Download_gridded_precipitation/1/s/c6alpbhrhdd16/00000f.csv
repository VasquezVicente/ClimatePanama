"0","#| output: false"
"0","dataset_earthenv <- links %>% filter(source == ""CHELSA EarthEnv"" & type == ""timeseries"")"
"0","checkdir(dataset_earthenv$source[1])"
"1","[1]"
"1"," ""directory./data_reanalysis/CHELSA EarthEnv already exists"""
"1","
"
"0","for (i in 1:nrow(dataset_earthenv)) {"
"0","    if (file.exists(paste0(""../data_reanalysis/"", dataset_earthenv$source[1],""/"",sub(""//.zip$"", """", dataset_earthenv$filename[i]))) == FALSE) {"
"0","    download.file(dataset_earthenv$link[i], destfile = paste0(""data_reanalysis/"", dataset_earthenv$source[1], ""/"", dataset_earthenv$filename[i]), method = ""curl"")"
"0","    unzip(paste0(""../data_reanalysis/"", dataset_earthenv$source[1], ""/"", dataset_earthenv$filename[i]), exdir = paste0(""../data_reanalysis/"", dataset_earthenv$source[1]))"
"0","    file.rename(paste0(""../data_reanalysis/"", dataset_earthenv$source[1],""/source""),"
"0","                paste0(""../data_reanalysis/"", dataset_earthenv$source[1],""/"",gsub(""//.zip$"", """", dataset_earthenv$filename[i])))"
"0","    unlink(paste0(""../data_reanalysis/"", dataset_earthenv$source[1], ""/"", dataset_earthenv$filename[1]))"
"0","    data<-list.files(paste0(""../data_reanalysis/"", dataset_earthenv$source[1],""/"",gsub(""//.zip$"", """", dataset_earthenv$filename[i])),pattern = "".tif"",full.names = TRUE)"
"0","    for (t in 1:length(data)) {"
"0","      ras<- raster::raster(data[t])"
"0","      ras<- raster::crop(ras, extentMap)"
"0","      ras<-raster::calc(ras, fun=function(x){x/100})"
"0","      writeRaster(ras, filename = data[t], format = ""GTiff"", overwrite = TRUE)"
"0","    }"
"0","  }else {"
"0","     print(""already exists"")"
"0","  }"
"0","}"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"

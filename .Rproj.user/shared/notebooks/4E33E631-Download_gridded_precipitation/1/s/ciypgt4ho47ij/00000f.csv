"0","#| output: false"
"0","chelsae5 <- list.files(""../data_reanalysis/CHELSA-W5E5v1.0"", pattern="".tif"", full.names = TRUE)"
"0","day <- numeric(length(chelsae5))"
"0","month <- numeric(length(chelsae5))"
"0","year <- numeric(length(chelsae5))"
"0","for (i in 1:length(chelsae5)) {"
"0","  file_parts <- unlist(strsplit(basename(chelsae5[i]), ""_""))"
"0","  day[i] <- as.numeric(gsub("".tif"", """", file_parts[8]))"
"0","  month[i] <- as.numeric(substring(file_parts[7], 5, 6))"
"0","  year[i] <- as.numeric(substring(file_parts[7], 1, 4))"
"0","}"
"0","chelsae5 <- data.frame(chelsae5, day, month, year)"
"0",""
"0","if (file.exists(""../data_reanalysis/CHELSA-W5E5v1.0/monthly"")==FALSE){"
"0","dir.create(""../data_reanalysis/CHELSA-W5E5v1.0/monthly"", showWarnings = FALSE)"
"0","for (y in unique(chelsae5$year)) {"
"0","  for (m in unique(chelsae5$month)) {"
"0","    print(paste0(""Processing "", y, ""_"", m))"
"0","    chelsae5[chelsae5$year == y & chelsae5$month == m, ]$chelsae5"
"0","    ras <- raster::stack(chelsae5[chelsae5$year == y & chelsae5$month == m, ]$chelsae5)"
"0","    print(paste0(""Stacked "", y, ""_"", m)	)"
"0","    ras <- raster::calc(ras, sum)"
"0","    print(paste0(""Calculated "", y, ""_"", m))"
"0","    output_file <- paste0(""../data_reanalysis/CHELSA-W5E5v1.0/monthly/CHELSA-W5E5v1.0_"", y, ""_"", m, "".tif"")"
"0","    "
"0","    raster::writeRaster(ras, filename = output_file, format = ""GTiff"", overwrite = TRUE)"
"0","  }"
"0","}"
"0","}else{"
"0","  print(""Monthly timeseries already processed"")"
"0","}"
"1","[1]"
"1"," ""Monthly timeseries already processed"""
"1","
"

"0","#| output: false"
"0","files<- list.files(""../data_reanalysis/TerraClimate/monthly"",pattern = "".tif"",full.names = TRUE)	"
"0","year<- numeric(length(files))"
"0","month<- numeric(length(files))"
"0","for (i in 1:length(files)) {"
"0","  file_parts <- unlist(strsplit(basename(files[i]), ""_""))"
"0","  year[i] <- as.numeric(substring(file_parts[3],1,4))"
"0","  month[i] <- as.numeric(gsub("".tif"", """", file_parts[4]))	"
"0","}"
"0","if (file.exists(""../data_reanalysis/TerraClimate/yearly"")==FALSE){"
"0","  dir.create(""../data_reanalysis/TerraClimate/yearly"", showWarnings = FALSE)"
"0","  for (y in unique(year)){"
"0","    print(paste0(""Processing "", y))"
"0","    ras <- raster::stack(files[year == y])"
"0","    print(paste0(""Stacked "", y))"
"0","    ras <- raster::calc(ras, sum)"
"0","    print(paste0(""Calculated "", y))"
"0","    output_file <- paste0(""../data_reanalysis/TerraClimate/yearly/TerraClimate_"", y, "".tif"")"
"0","    raster::writeRaster(ras, filename = output_file, format = ""GTiff"", overwrite = TRUE)"
"0","  }"
"0","}else{"
"0","  print(""Yearly timeseries already processed"")"
"0","}"
"1","[1]"
"1"," ""Yearly timeseries already processed"""
"1","
"

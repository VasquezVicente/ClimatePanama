"0","#| output: false"
"0","dataset_terra <- links %>% filter(source == ""TerraClimate"" & type == ""timeseries"")"
"0","checkdir(dataset_terra$source[1])"
"1","[1]"
"1"," ""directory./data_reanalysis/TerraClimate already exists"""
"1","
"
"0","dir.create(paste0(""../data_reanalysis/"", dataset_terra$source[1],""/monthly""), showWarnings = FALSE)"
"0","for (i in 1:nrow(dataset_terra)){"
"0","  tif_files <- paste0(""../data_reanalysis/"", dataset_terra$source[1],""/monthly/"",dataset_terra$filename[i],""_"", sprintf(""%02d"", 1:12), "".tif"")"
"0","  if (!all(file.exists(tif_files))) {"
"0","    download.file(dataset_terra$link[i], destfile = paste0(""../data_reanalysis/"", dataset_terra$source[1], ""/monthly/"", dataset_terra$filename[i]), method = ""curl"")"
"0","    ras<-raster::stack(paste0(""../data_reanalysis/"", dataset_terra$source[1], ""/monthly/"", dataset_terra$filename[i]))"
"0","    ras<- raster::crop(ras, extentMap)"
"0","    for (t in 1:nlayers(ras)) {"
"0","      t_formatted <- sprintf(""%02d"", t)"
"0","      writeRaster(ras[[t]], filename = paste0(""../data_reanalysis/"", dataset_terra$source[1],""/monthly/"",dataset_terra$filename[i],""_"",t_formatted,"".tif""), format = ""GTiff"", overwrite = TRUE)"
"0","    }"
"0","    unlink(paste0(""../data_reanalysis/"", dataset_terra$source[1], ""/monthly/"", dataset_terra$filename[i]))"
"0","  } else {"
"0","    print(""already exists"")"
"0","  }"
"0","}"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"
"1","[1]"
"1"," ""already exists"""
"1","
"

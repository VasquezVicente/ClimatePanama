"0","files <- list.files(""../data_reanalysis/CHELSA EarthEnv/monthly"", pattern = "".tif"", full.names = TRUE)"
"0","data <- data.frame(files)"
"0","years <- vector(""character"", length(files))"
"0","month <- vector(""character"", length(files))"
"0","for (i in seq_along(files)) {"
"0","  years[i] <- gsub("".tif"", """", strsplit(files[i], ""_"")[[1]][6])"
"0","  month[i] <-strsplit(files[i], ""_"")[[1]][5]"
"0","}"
"0","data$year <- years"
"0","data$month <- month"
"0","years<- 2003:2015"
"0","if (dir.exists(""../data_reanalysis/CHELSA EarthEnv/yearly"")==FALSE){"
"0","  dir.create(""../data_reanalysis/CHELSA EarthEnv/yearly"", showWarnings = FALSE)"
"0","  for (year in years){"
"0","    print(paste0(""processing "",year))"
"0","    ras<- raster::stack(data[data$year==year,]$files)"
"0","    ras<- raster::calc(ras,sum)"
"0","    writeRaster(ras, filename = paste0(""/..data_reanalysis/CHELSA EarthEnv/yearly/"",""CHELSA_EarthEnv_"",year,"".tif""), format = ""GTiff"", overwrite = TRUE)"
"0","  }"
"0","}else{"
"0","  print(""Yearly data already processed"")"
"0","}"
"1","[1]"
"1"," ""Yearly data already processed"""
"1","
"
